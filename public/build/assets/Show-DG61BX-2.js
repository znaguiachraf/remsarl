import{b as _,a as g,u as k,j as e,H as C,L as o,r as u}from"./app-BlX03mzX.js";import{P as S}from"./ProjectLayout-D4xg56M6.js";import{M as v,S as m}from"./SecondaryButton-C2YhS4v4.js";import{P as x}from"./PrimaryButton-CfiEdafn.js";import{I as d}from"./InputLabel-D3mn3EFl.js";import{T as c}from"./TextInput-CVPgh3zi.js";import{I as f}from"./InputError-9bRaEsxV.js";import{g as D,i as P,e as I,l as E,b as A,c as L}from"./Icons-BQmM-dec.js";import"./AuthErrorHandler-DiA3UOu9.js";import"./Dropdown-C6TVOxvb.js";import"./transition--Zpz-q8I.js";function z({project:r,supplier:s,can:h}){const n=_().props.currentProject?.primary_color||"#3B82F6",y="focus:border-[var(--project-primary)] focus:ring-[var(--project-primary)]",[N,l]=g.useState(!1),[b,i]=g.useState(!1),a=k({name:s?.name||"",contact_person:s?.contact_person||"",email:s?.email||"",phone:s?.phone||"",address:s?.address||"",notes:s?.notes||"",is_active:s?.is_active??!0}),p=t=>{t.preventDefault(),s&&a.patch(route("projects.modules.suppliers.update",[r.id,s.id]),{preserveScroll:!0,onSuccess:()=>l(!1)})},w=()=>{s&&u.delete(route("projects.modules.suppliers.destroy",[r.id,s.id]),{onSuccess:()=>u.visit(route("projects.modules.suppliers.index",r.id))})},j=`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${y}`;return s?e.jsxs(S,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{href:route("projects.modules.suppliers.index",r.id),className:"rounded-lg p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-slate-100 text-slate-600",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:s.name}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:e.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium ${s.is_active?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-600"}`,children:s.is_active?"Active":"Inactive"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h?.update&&e.jsxs(x,{onClick:()=>{l(!0),a.setData({name:s.name,contact_person:s.contact_person||"",email:s.email||"",phone:s.phone||"",address:s.address||"",notes:s.notes||"",is_active:s.is_active})},children:[e.jsx(A,{className:"h-4 w-4"}),"Edit"]}),h?.delete&&e.jsxs(m,{onClick:()=>i(!0),className:"border-red-200 text-red-700 hover:bg-red-50",children:[e.jsx(L,{className:"h-4 w-4"}),"Delete"]})]})]}),children:[e.jsx(C,{title:`${r?.name} - ${s.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Contact Information"}),e.jsxs("dl",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[s.contact_person&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Contact Person"}),e.jsx("dd",{className:"mt-1 text-sm font-medium text-gray-900",children:s.contact_person})]}),s.email&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("dd",{className:"mt-1 text-sm font-medium text-gray-900",children:e.jsx("a",{href:`mailto:${s.email}`,className:"hover:underline",style:{color:n},children:s.email})})]}),s.phone&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("dd",{className:"mt-1 text-sm font-medium text-gray-900",children:s.phone})]}),s.address&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.address})]}),s.notes&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Notes"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:s.notes})]}),!s.contact_person&&!s.email&&!s.phone&&!s.address&&!s.notes&&e.jsx("p",{className:"text-sm text-gray-500",children:"No contact information added."})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-gray-500"}),"Linked Products"]}),e.jsx(o,{href:route("projects.modules.products.index",r.id),className:"text-sm font-medium hover:underline",style:{color:n},children:"View all products"})]}),s.products?.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:s.products.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx(o,{href:route("projects.modules.products.index",r.id),className:"font-medium text-gray-900 hover:underline",style:{color:n},children:t.name})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right text-gray-600",children:[e.jsx(P,{className:"inline h-4 w-4 text-gray-400"})," ",Number(t.price).toLocaleString()," / ",t.unit]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium ${t.is_active?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-600"}`,children:t.is_active?"Active":"Inactive"})})]},t.id))})]}):e.jsx("div",{className:"px-6 py-8 text-center text-sm text-gray-500",children:"No products linked to this supplier."})]})]}),N&&e.jsx(v,{show:!0,onClose:()=>l(!1),maxWidth:"md",children:e.jsxs("form",{onSubmit:p,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Supplier"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Name"}),e.jsx(c,{value:a.data.name,onChange:t=>a.setData("name",t.target.value),className:"block w-full",required:!0}),e.jsx(f,{message:a.errors.name})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Contact Person"}),e.jsx(c,{value:a.data.contact_person,onChange:t=>a.setData("contact_person",t.target.value),className:"block w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Email"}),e.jsx(c,{type:"email",value:a.data.email,onChange:t=>a.setData("email",t.target.value),className:"block w-full"}),e.jsx(f,{message:a.errors.email})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Phone"}),e.jsx(c,{value:a.data.phone,onChange:t=>a.setData("phone",t.target.value),className:"block w-full"})]})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Address"}),e.jsx("textarea",{value:a.data.address,onChange:t=>a.setData("address",t.target.value),rows:2,className:j+" w-full"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Notes"}),e.jsx("textarea",{value:a.data.notes,onChange:t=>a.setData("notes",t.target.value),rows:2,className:j+" w-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"edit_is_active",checked:a.data.is_active,onChange:t=>a.setData("is_active",t.target.checked),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"edit_is_active",children:"Active"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(m,{type:"button",onClick:()=>l(!1),children:"Cancel"}),e.jsx(x,{type:"submit",disabled:a.processing,children:"Save"})]})]})}),b&&e.jsx(v,{show:!0,onClose:()=>i(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Supplier"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete "',s.name,'"? Products linked to this supplier will not be deleted.']}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(m,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(x,{onClick:w,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Delete"})]})]})})]}):null}export{z as default};
