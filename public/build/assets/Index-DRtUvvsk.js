import{a as o,j as s,H as Re,r as _e}from"./app-CuFrb5oC.js";import{P as Le}from"./ProjectLayout-DaJ10U2j.js";import{c as b,p as W,a as Ke,i as Me,s as _,b as Fe,d as $e,e as be,f as Be,g as We,h as S,j as Ge,k as ze,l as Ve,m as Ue,n as je,o as He,q as Ze,r as qe,t as Xe,u as Pe,v as Je,w as Qe,x as Ye,y as Ae,z as ea,A as se,B as Oe,R as aa,S as ta,D as Ee,C as Ne,E as $,F as ra,G as ie,L as K,Z as we,H as le,I as na,J as sa,K as ia,M as la,N as de,O as ue,P as q,Q as oa,T as ca,U as da,V as ua,W as ma,X as pa,Y as va,_ as fa,$ as ga,a0 as ha,a1 as xa,a2 as ya,a3 as ba,a4 as B,a5 as re,a6 as me,a7 as ja,a8 as Pa,a9 as Aa,aa as Oa,ab as Ea,ac as Na,ad as wa,ae as ka,af as Ia,ag as Sa,ah as Da,ai as H,aj as Y,ak as ee,al as ae,am as te,an as Z,ao as Ca,ap as F}from"./BarChart-DD8Su8Ch.js";import"./AuthErrorHandler-BdtQ55SJ.js";import"./SecondaryButton-C6zYHwF4.js";import"./transition-BjzyzsqC.js";import"./Dropdown-Chy7OZUe.js";var ke=e=>e.graphicalItems.polarItems,Ta=b([W,Ke],Me),X=b([ke,_,Ta],Fe),Ra=b([X],$e),J=b([Ra,be],Be),_a=b([J,_,X],We);b([J,_,X],(e,a,t)=>t.length>0?e.flatMap(r=>t.flatMap(n=>{var l,d=S(r,(l=a.dataKey)!==null&&l!==void 0?l:n.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):a?.dataKey!=null?e.map(r=>({value:S(r,a.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var pe=()=>{},La=b([J,_,X,Ge,W],ze),Ka=b([_,Ve,Ue,pe,La,pe,je,W],He),Ie=b([_,je,J,_a,Ze,W,Ka],qe),Ma=b([Ie,Xe,Pe],Je),Fa=b([_,Ie,Ma,W],Qe);b([Pe,Fa],Ye);function ve(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function fe(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?ve(Object(t),!0).forEach(function(r){$a(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function $a(e,a,t){return(a=Ba(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Ba(e){var a=Wa(e,"string");return typeof a=="symbol"?a:a+""}function Wa(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Ga=(e,a)=>a,oe=b([ke,Ga],(e,a)=>e.filter(t=>t.type==="pie").find(t=>t.id===a)),za=[],ce=(e,a,t)=>t?.length===0?za:t,Se=b([be,oe,ce],(e,a,t)=>{var{chartData:r}=e;if(a!=null){var n;if(a?.data!=null&&a.data.length>0?n=a.data:n=r,(!n||!n.length)&&t!=null&&(n=t.map(l=>fe(fe({},a.presentationProps),l.props))),n!=null)return n}}),Va=b([Se,oe,ce],(e,a,t)=>{if(!(e==null||a==null))return e.map((r,n)=>{var l,d=S(r,a.nameKey,a.name),u;return t!=null&&(l=t[n])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?u=t[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=a.fill,{value:Ae(d,a.dataKey),color:u,payload:r,type:a.legendType}})}),Ua=b([Se,oe,ce,ea],(e,a,t,r)=>{if(!(a==null||e==null))return mt({offset:r,pieSettings:a,displayedData:e,cells:t})}),Ha=["key"],Za=["onMouseEnter","onClick","onMouseLeave"],qa=["id"],Xa=["id"];function ge(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function f(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?ge(Object(t),!0).forEach(function(r){Ja(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Ja(e,a,t){return(a=Qa(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Qa(e){var a=Ya(e,"string");return typeof a=="symbol"?a:a+""}function Ya(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},D.apply(null,arguments)}function Q(e,a){if(e==null)return{};var t,r,n=et(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function et(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function at(e){var a=o.useMemo(()=>Ne(e.children,le),[e.children]),t=$(r=>Va(r,e.id,a));return t==null?null:o.createElement(ra,{legendPayload:t})}var tt=o.memo(e=>{var{dataKey:a,nameKey:t,sectors:r,stroke:n,strokeWidth:l,fill:d,name:u,hide:h,tooltipType:v,id:g}=e,x={dataDefinedOnItem:r.map(c=>c.tooltipPayload),getPosition:c=>{var i;return(i=r[Number(c)])===null||i===void 0?void 0:i.tooltipPosition},settings:{stroke:n,strokeWidth:l,fill:d,dataKey:a,nameKey:t,name:Ae(u,a),hide:h,type:v,color:d,unit:"",graphicalItemId:g}};return o.createElement(na,{tooltipEntrySettings:x})}),rt=(e,a)=>e>a?"start":e<a?"end":"middle",nt=(e,a,t)=>typeof a=="function"?B(a(e),t,t*.8):B(a,t,t*.8),st=(e,a,t)=>{var{top:r,left:n,width:l,height:d}=a,u=ba(l,d),h=n+B(e.cx,l,l/2),v=r+B(e.cy,d,d/2),g=B(e.innerRadius,u,0),x=nt(t,e.outerRadius,u),c=e.maxRadius||Math.sqrt(l*l+d*d)/2;return{cx:h,cy:v,innerRadius:g,outerRadius:x,maxRadius:c}},it=(e,a)=>{var t=q(a-e),r=Math.min(Math.abs(a-e),360);return t*r},lt=(e,a)=>{if(o.isValidElement(e))return o.cloneElement(e,a);if(typeof e=="function")return e(a);var t=ie("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=a,n=Q(a,Ha);return o.createElement(ja,D({},n,{type:"linear",className:t}))},ot=(e,a,t)=>{if(o.isValidElement(e))return o.cloneElement(e,a);var r=t;if(typeof e=="function"&&(r=e(a),o.isValidElement(r)))return r;var n=ie("recharts-pie-label-text",Pa(e));return o.createElement(Aa,D({},a,{alignmentBaseline:"middle",className:n}),r)};function ct(e){var{sectors:a,props:t,showLabels:r}=e,{label:n,labelLine:l,dataKey:d}=t;if(!r||!n||!a)return null;var u=Oe(t),h=me(n),v=me(l),g=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,x=a.map((c,i)=>{var m=(c.startAngle+c.endAngle)/2,A=re(c.cx,c.cy,c.outerRadius+g,m),E=f(f(f(f({},u),c),{},{stroke:"none"},h),{},{index:i,textAnchor:rt(A.x,c.cx)},A),p=f(f(f(f({},u),c),{},{fill:"none",stroke:c.fill},v),{},{index:i,points:[re(c.cx,c.cy,c.outerRadius,m),A],key:"line"});return o.createElement(we,{zIndex:Ee.label,key:"label-".concat(c.startAngle,"-").concat(c.endAngle,"-").concat(c.midAngle,"-").concat(i)},o.createElement(K,null,l&&lt(l,p),ot(n,E,S(c,d))))});return o.createElement(K,{className:"recharts-pie-labels"},x)}function dt(e){var{sectors:a,props:t,showLabels:r}=e,{label:n}=t;return typeof n=="object"&&n!=null&&"position"in n?o.createElement(ya,{label:n}):o.createElement(ct,{sectors:a,props:t,showLabels:r})}function ut(e){var{sectors:a,activeShape:t,inactiveShape:r,allOtherPieProps:n,shape:l,id:d}=e,u=$(ca),h=$(da),v=$(ua),{onMouseEnter:g,onClick:x,onMouseLeave:c}=n,i=Q(n,Za),m=ma(g,n.dataKey,d),A=pa(c),E=va(x,n.dataKey,d);return a==null||a.length===0?null:o.createElement(o.Fragment,null,a.map((p,O)=>{if(p?.startAngle===0&&p?.endAngle===0&&a.length!==1)return null;var C=v==null||v===d,w=String(O)===u&&(h==null||n.dataKey===h)&&C,N=u?r:null,P=t&&w?t:N,j=f(f({},p),{},{stroke:p.stroke,tabIndex:-1,[ga]:O,[fa]:d});return o.createElement(K,D({key:"sector-".concat(p?.startAngle,"-").concat(p?.endAngle,"-").concat(p.midAngle,"-").concat(O),tabIndex:-1,className:"recharts-pie-sector"},ha(i,p,O),{onMouseEnter:m(p,O),onMouseLeave:A(p,O),onClick:E(p,O)}),o.createElement(xa,D({option:l??P,index:O,shapeType:"sector",isActive:w},j)))}))}function mt(e){var a,{pieSettings:t,displayedData:r,cells:n,offset:l}=e,{cornerRadius:d,startAngle:u,endAngle:h,dataKey:v,nameKey:g,tooltipType:x}=t,c=Math.abs(t.minAngle),i=it(u,h),m=Math.abs(i),A=r.length<=1?0:(a=t.paddingAngle)!==null&&a!==void 0?a:0,E=r.filter(P=>S(P,v,0)!==0).length,p=(m>=360?E:E-1)*A,O=m-E*c-p,C=r.reduce((P,j)=>{var y=S(j,v,0);return P+(ue(y)?y:0)},0),w;if(C>0){var N;w=r.map((P,j)=>{var y=S(P,v,0),M=S(P,g,j),k=st(t,l,P),T=(ue(y)?y:0)/C,R,L=f(f({},P),n&&n[j]&&n[j].props);j?R=N.endAngle+q(i)*A*(y!==0?1:0):R=u;var G=R+q(i)*((y!==0?c:0)+T*O),z=(R+G)/2,V=(k.innerRadius+k.outerRadius)/2,U=[{name:M,value:y,payload:L,dataKey:v,type:x,graphicalItemId:t.id}],Te=re(k.cx,k.cy,V,z);return N=f(f(f(f({},t.presentationProps),{},{percent:T,cornerRadius:typeof d=="string"?parseFloat(d):d,name:M,tooltipPayload:U,midAngle:z,middleRadius:V,tooltipPosition:Te},L),k),{},{value:y,dataKey:v,startAngle:R,endAngle:G,payload:L,paddingAngle:q(i)*A}),N})}return w}function pt(e){var{showLabels:a,sectors:t,children:r}=e,n=o.useMemo(()=>!a||!t?[]:t.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[t,a]);return o.createElement(oa,{value:a?n:void 0},r)}function vt(e){var{props:a,previousSectorsRef:t,id:r}=e,{sectors:n,isAnimationActive:l,animationBegin:d,animationDuration:u,animationEasing:h,activeShape:v,inactiveShape:g,onAnimationStart:x,onAnimationEnd:c}=a,i=sa(a,"recharts-pie-"),m=t.current,[A,E]=o.useState(!1),p=o.useCallback(()=>{typeof c=="function"&&c(),E(!1)},[c]),O=o.useCallback(()=>{typeof x=="function"&&x(),E(!0)},[x]);return o.createElement(pt,{showLabels:!A,sectors:n},o.createElement(ia,{animationId:i,begin:d,duration:u,isActive:l,easing:h,onAnimationStart:O,onAnimationEnd:p,key:i},C=>{var w,N=[],P=n&&n[0],j=(w=P?.startAngle)!==null&&w!==void 0?w:0;return n?.forEach((y,M)=>{var k=m&&m[M],T=M>0?la(y,"paddingAngle",0):0;if(k){var R=de(k.endAngle-k.startAngle,y.endAngle-y.startAngle,C),L=f(f({},y),{},{startAngle:j+T,endAngle:j+R+T});N.push(L),j=L.endAngle}else{var{endAngle:G,startAngle:z}=y,V=de(0,G-z,C),U=f(f({},y),{},{startAngle:j+T,endAngle:j+V+T});N.push(U),j=U.endAngle}}),t.current=N,o.createElement(K,null,o.createElement(ut,{sectors:N,activeShape:v,inactiveShape:g,allOtherPieProps:a,shape:a.shape,id:r}))}),o.createElement(dt,{showLabels:!A,sectors:n,props:a}),a.children)}var ft={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ee.area};function gt(e){var{id:a}=e,t=Q(e,qa),{hide:r,className:n,rootTabIndex:l}=e,d=o.useMemo(()=>Ne(e.children,le),[e.children]),u=$(g=>Ua(g,a,d)),h=o.useRef(null),v=ie("recharts-pie",n);return r||u==null?(h.current=null,o.createElement(K,{tabIndex:l,className:v})):o.createElement(we,{zIndex:e.zIndex},o.createElement(tt,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:a}),o.createElement(K,{tabIndex:l,className:v},o.createElement(vt,{props:f(f({},t),{},{sectors:u}),previousSectorsRef:h,id:a})))}function De(e){var a=se(e,ft),{id:t}=a,r=Q(a,Xa),n=Oe(r);return o.createElement(aa,{id:t,type:"pie"},l=>o.createElement(o.Fragment,null,o.createElement(ta,{type:"pie",id:l,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:a.maxRadius}),o.createElement(at,D({},r,{id:l})),o.createElement(gt,D({},r,{id:l}))))}De.displayName="Pie";function ht(e){var a=Oa();return o.useEffect(()=>{a(Ea(e))},[a,e]),null}var xt=["layout"];function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ne.apply(null,arguments)}function yt(e,a){if(e==null)return{};var t,r,n=bt(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function bt(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}var jt={top:5,right:5,bottom:5,left:5},Ce={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:jt,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Pt=o.forwardRef(function(a,t){var r,n=se(a.categoricalChartProps,Ce),{layout:l}=n,d=yt(n,xt),{chartName:u,defaultTooltipEventType:h,validateTooltipEventTypes:v,tooltipPayloadSearcher:g}=a,x={chartName:u,defaultTooltipEventType:h,validateTooltipEventTypes:v,tooltipPayloadSearcher:g,eventEmitter:void 0};return o.createElement(Na,{preloadedState:{options:x},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:u},o.createElement(wa,{chartData:n.data}),o.createElement(ka,{layout:l,margin:n.margin}),o.createElement(Ia,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),o.createElement(ht,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),o.createElement(Sa,ne({},d,{ref:t})))});function he(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function xe(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?he(Object(t),!0).forEach(function(r){At(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function At(e,a,t){return(a=Ot(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Ot(e){var a=Et(e,"string");return typeof a=="symbol"?a:a+""}function Et(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Nt=["item"],wt=xe(xe({},Ce),{},{layout:"centric",startAngle:0,endAngle:360}),kt=o.forwardRef((e,a)=>{var t=se(e,wt);return o.createElement(Pt,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Nt,tooltipPayloadSearcher:Da,categoricalChartProps:t,ref:a})});function I(e){return Number(e).toLocaleString()}const ye=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];function Lt({project:e,salesVsExpenses:a,expensesByCategory:t,topProducts:r,salesByHour:n,salesByDay:l,filters:d={}}){const u=e?.primary_color||"#3B82F6",h=e?.secondary_color||"#10B981",v=a?.labels?.map((i,m)=>({label:i,sales:a.datasets?.[0]?.data?.[m]??0,expenses:a.datasets?.[1]?.data?.[m]??0}))??[],g=i=>{_e.get(route("projects.modules.analytics.index",e.id),{...d,...i},{preserveState:!0})},x=n?.reduce((i,m)=>m.revenue>(i?.revenue??0)?m:i,null),c=l?.reduce((i,m)=>m.revenue>(i?.revenue??0)?m:i,null);return s.jsxs(Le,{header:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Analytics"}),s.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"Sales vs expenses, top products, and peak times"})]})}),children:[s.jsx(Re,{title:`${e?.name} - Analytics`}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Period:"}),s.jsxs("select",{value:d.period??"month",onChange:i=>g({period:i.target.value}),className:"rounded-md border-gray-300 text-sm focus:border-blue-500 focus:ring-blue-500",children:[s.jsx("option",{value:"month",children:"By Month"}),s.jsx("option",{value:"day",children:"By Day"})]}),s.jsx("label",{className:"ml-4 text-sm font-medium text-gray-700",children:"Months:"}),s.jsx("select",{value:d.months??12,onChange:i=>g({months:parseInt(i.target.value,10)}),className:"rounded-md border-gray-300 text-sm focus:border-blue-500 focus:ring-blue-500",children:[3,6,12,24].map(i=>s.jsxs("option",{value:i,children:[i," months"]},i))})]}),s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Sales vs Expenses"}),s.jsx("div",{className:"h-72",children:v.length>0?s.jsx(H,{width:"100%",height:"100%",children:s.jsxs(Y,{data:v,margin:{top:10,right:10,left:0,bottom:0},children:[s.jsx(ee,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(ae,{dataKey:"label",tick:{fontSize:12},stroke:"#6b7280"}),s.jsx(te,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:i=>i>=1e3?`${(i/1e3).toFixed(0)}k`:i}),s.jsx(Z,{formatter:i=>I(i),contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),s.jsx(Ca,{}),s.jsx(F,{dataKey:"sales",name:"Sales",fill:u,radius:[4,4,0,0]}),s.jsx(F,{dataKey:"expenses",name:"Expenses",fill:h,radius:[4,4,0,0]})]})}):s.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:"No sales or expenses data for the selected period."})})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Expenses by Category"}),t?.length>0?s.jsx("div",{className:"h-64",children:s.jsx(H,{width:"100%",height:"100%",children:s.jsxs(kt,{children:[s.jsx(De,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:i,percent:m})=>`${i} ${(m*100).toFixed(0)}%`,children:t.map((i,m)=>s.jsx(le,{fill:i.color||ye[m%ye.length]},i.name))}),s.jsx(Z,{formatter:i=>I(i)})]})})}):s.jsx("p",{className:"text-sm text-gray-500",children:"No expense data yet."})]}),s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Sales by Hour"}),n?.some(i=>i.count>0)?s.jsxs(s.Fragment,{children:[x&&x.revenue>0&&s.jsxs("p",{className:"mb-3 text-sm text-gray-600",children:["Peak hour: ",s.jsx("strong",{children:x.label})," (",I(x.revenue)," revenue)"]}),s.jsx("div",{className:"h-64",children:s.jsx(H,{width:"100%",height:"100%",children:s.jsxs(Y,{data:n,margin:{top:10,right:10,left:0,bottom:0},children:[s.jsx(ee,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(ae,{dataKey:"label",tick:{fontSize:10},interval:2}),s.jsx(te,{tick:{fontSize:12},tickFormatter:i=>i>=1e3?`${(i/1e3).toFixed(0)}k`:i}),s.jsx(Z,{formatter:i=>I(i)}),s.jsx(F,{dataKey:"revenue",name:"Revenue",fill:u,radius:[4,4,0,0]})]})})})]}):s.jsx("p",{className:"text-sm text-gray-500",children:"No sales time data yet."})]})]}),s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm overflow-hidden",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Top Products Selling"}),s.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),s.jsx("input",{type:"date",value:d.from_date??"",onChange:i=>g({from_date:i.target.value||void 0}),className:"rounded-md border-gray-300 text-sm focus:border-blue-500 focus:ring-blue-500"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),s.jsx("input",{type:"date",value:d.to_date??"",onChange:i=>g({to_date:i.target.value||void 0}),className:"rounded-md border-gray-300 text-sm focus:border-blue-500 focus:ring-blue-500"}),s.jsx("button",{type:"button",onClick:()=>g({from_date:void 0,to_date:void 0}),className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Clear"})]}),r?.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"#"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Product"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Quantity Sold"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Total Revenue"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r.map((i,m)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-gray-500",children:m+1}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm font-medium text-gray-900",children:i.product_name}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-right text-gray-600",children:I(i.total_quantity)}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-right font-medium text-gray-900",children:I(i.total_revenue)})]},i.product_id))})]})}):s.jsx("p",{className:"text-sm text-gray-500",children:"No product sales data for the selected date range."})]}),s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Sales by Day of Week"}),l?.some(i=>i.count>0)?s.jsxs(s.Fragment,{children:[c&&c.revenue>0&&s.jsxs("p",{className:"mb-3 text-sm text-gray-600",children:["Peak day: ",s.jsx("strong",{children:c.label})," (",I(c.revenue)," revenue, ",c.count," sales)"]}),s.jsx("div",{className:"h-64",children:s.jsx(H,{width:"100%",height:"100%",children:s.jsxs(Y,{data:l,margin:{top:10,right:10,left:0,bottom:0},children:[s.jsx(ee,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(ae,{dataKey:"label",tick:{fontSize:12}}),s.jsx(te,{tick:{fontSize:12},tickFormatter:i=>i>=1e3?`${(i/1e3).toFixed(0)}k`:i}),s.jsx(Z,{formatter:i=>I(i)}),s.jsx(F,{dataKey:"revenue",name:"Revenue",fill:h,radius:[4,4,0,0]}),s.jsx(F,{dataKey:"count",name:"Count",fill:u,radius:[4,4,0,0]})]})})})]}):s.jsx("p",{className:"text-sm text-gray-500",children:"No sales by day data yet."})]})]})]})}export{Lt as default};
