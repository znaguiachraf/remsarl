import{a as l,u as h,j as e,H as j,L as b,r as c}from"./app-D_JLr605.js";import{A as w,a as r}from"./AdminLayout-vQSi5Tbb.js";import{M as y,S as N}from"./SecondaryButton-C5Psiqnm.js";import{P as m}from"./PrimaryButton-BodgzNLV.js";import"./AuthErrorHandler-DUQsMJae.js";import"./transition-BeUOXmgI.js";function R({users:o,flash:i}){const[x,a]=l.useState(!1),[n,d]=l.useState(null),t=h({password:"",password_confirmation:""}),u=s=>{d(s),t.reset(),a(!0)},p=s=>{s.preventDefault(),n&&t.post(route("admin.users.reset-password",n.id),{preserveScroll:!0,onSuccess:()=>{a(!1),d(null)}})},g=s=>{confirm(`Block ${s.name}? They will not be able to log in.`)&&c.post(route("admin.users.block",s.id),{},{preserveScroll:!0})},f=s=>{confirm(`Unblock ${s.name}?`)&&c.post(route("admin.users.unblock",s.id),{},{preserveScroll:!0})};return e.jsxs(w,{header:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-50 p-2",children:e.jsx(r,{icon:"users",className:"w-6 h-6 text-indigo-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Users"})]}),e.jsx(b,{href:route("admin.users.create"),children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(r,{icon:"plus",className:"w-5 h-5"}),"Create User"]})})]}),children:[e.jsx(j,{title:"Users - Admin"}),i?.success&&e.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-4 text-sm text-green-800",children:i.success}),i?.error&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4 text-sm text-red-800",children:i.error}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{icon:"users",className:"w-4 h-4 text-gray-400"}),"User"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-green-400","aria-hidden":!0}),"Status"]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:o?.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-indigo-100",children:e.jsx(r,{icon:"users",className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),s.is_admin&&e.jsxs("span",{className:"mt-1 inline-flex items-center gap-1 rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium text-indigo-800",children:[e.jsx(r,{icon:"permissions",className:"w-3 h-3"}),"Admin"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.is_blocked?e.jsx("span",{className:"inline-flex rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800",children:"Blocked"}):e.jsx("span",{className:"inline-flex rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Active"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>u(s),className:"inline-flex items-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-1.5 text-sm font-medium text-indigo-700 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1",children:[e.jsx(r,{icon:"key",className:"w-4 h-4"}),"Reset Password"]}),s.is_blocked?e.jsxs("button",{type:"button",onClick:()=>f(s),className:"inline-flex items-center gap-2 rounded-lg border border-green-200 bg-green-50 px-3 py-1.5 text-sm font-medium text-green-700 transition hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1",children:[e.jsx(r,{icon:"lock-open",className:"w-4 h-4"}),"Unblock"]}):e.jsxs("button",{type:"button",onClick:()=>g(s),disabled:s.is_admin,className:"inline-flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-1.5 text-sm font-medium text-red-700 transition hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",title:s.is_admin?"Cannot block admin":void 0,children:[e.jsx(r,{icon:"lock",className:"w-4 h-4"}),"Block"]})]})})]},s.id))})]}),(!o||o.length===0)&&e.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"No users yet."})]}),x&&n&&e.jsx(y,{show:!0,onClose:()=>{a(!1),d(null),t.reset()},maxWidth:"md",children:e.jsxs("form",{onSubmit:p,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reset Password"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Set a new password for ",n.name," (",n.email,")."]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{type:"password",value:t.data.password,onChange:s=>t.setData("password",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,minLength:8}),t.errors.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("input",{type:"password",value:t.data.password_confirmation,onChange:s=>t.setData("password_confirmation",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.errors.password_confirmation&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.password_confirmation})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(N,{type:"button",onClick:()=>{a(!1),d(null),t.reset()},children:"Cancel"}),e.jsx(m,{type:"submit",disabled:t.processing,children:"Reset Password"})]})]})})]})}export{R as default};
