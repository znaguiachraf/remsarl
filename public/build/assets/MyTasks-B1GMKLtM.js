import{b as m,j as e,H as y,L as o,r as c}from"./app-CNtjz-n6.js";import{P as j}from"./ProjectLayout-C2dzVJMm.js";import{P as b}from"./PrimaryButton-BnKcJi9k.js";import{q as v,r as x}from"./Icons-CyrJO6rX.js";import"./AuthErrorHandler-2P6lq71E.js";import"./SecondaryButton-DYJNMu7q.js";import"./transition-uswAIGXr.js";import"./Dropdown-DzIt9eqU.js";function T({project:r,worker:p,tasks:a,filters:t}){const{flash:i}=m().props,n=m().props.currentProject?.primary_color||"#3B82F6",h="focus:border-[var(--project-primary)] focus:ring-[var(--project-primary)]",d=s=>{c.get(route("projects.modules.tasks.my-tasks",r.id),s,{preserveState:!0})},g=s=>{c.post(route("projects.modules.tasks.complete",[r.id,s.id]),{},{preserveScroll:!0})},l=`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${h}`;return e.jsxs(j,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 shrink-0 flex items-center justify-center rounded-lg bg-indigo-100 text-indigo-600",children:e.jsx(x,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"My Tasks"}),e.jsxs("p",{className:"mt-0.5 text-sm text-gray-500",children:["Tasks assigned to ",p?.full_name]})]})]}),e.jsx(o,{href:route("projects.modules.tasks.index",r.id),className:"inline-flex items-center gap-2 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"All Tasks"})]}),children:[e.jsx(y,{title:`${r?.name} - My Tasks`}),i?.success&&e.jsx("div",{className:"mb-4 rounded-lg bg-emerald-50 px-4 py-3 text-sm text-emerald-800",children:i.success}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[e.jsxs("select",{value:t?.status||"",onChange:s=>d({...t,status:s.target.value||void 0}),className:l+" max-w-[140px]",children:[e.jsx("option",{value:"",children:"All statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"done",children:"Done"})]}),e.jsx("input",{type:"date",value:t?.date_day||"",onChange:s=>d({...t,date_day:s.target.value||void 0,date_month:void 0}),className:l+" max-w-[150px]",title:"Filter by day"}),e.jsx("input",{type:"month",value:t?.date_month||"",onChange:s=>d({...t,date_month:s.target.value||void 0,date_day:void 0}),className:l+" max-w-[160px]",title:"Filter by month"}),(t?.date_day||t?.date_month)&&e.jsx("button",{type:"button",onClick:()=>d({...t,date_day:void 0,date_month:void 0}),className:"text-sm text-gray-600 hover:text-gray-900",children:"Clear date"})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 sm:px-6 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Task"}),e.jsx("th",{className:"px-4 py-3 sm:px-6 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),e.jsx("th",{className:"px-4 py-3 sm:px-6 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Created"}),e.jsx("th",{className:"px-4 py-3 sm:px-6 text-right text-xs font-medium uppercase tracking-wider text-gray-500 bg-gray-50 sticky right-0 shrink-0",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:a?.data?.map(s=>e.jsxs("tr",{className:`transition-colors ${s.status==="done"?"bg-emerald-50/70 hover:bg-emerald-100/70 border-l-4 border-l-emerald-400":"bg-amber-50/50 hover:bg-amber-100/70 border-l-4 border-l-amber-400"}`,children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.title}),s.description&&e.jsx("div",{className:"mt-0.5 text-sm text-gray-500 line-clamp-2",children:s.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium ${s.status==="done"?"bg-emerald-100 text-emerald-800":"bg-amber-100 text-amber-800"}`,children:s.status_label})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[s.created_at,s.completed_at&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Done: ",s.completed_at]})]}),e.jsx("td",{className:`px-4 py-4 sm:px-6 whitespace-nowrap text-right sticky right-0 shrink-0 shadow-[-4px_0_8px_-2px_rgba(0,0,0,0.05)] min-w-[80px] ${s.status==="done"?"bg-emerald-50/70":"bg-amber-50/50"}`,children:s.can_complete&&s.status==="pending"&&e.jsxs(b,{onClick:()=>g(s),className:"inline-flex items-center gap-1 sm:gap-1.5 shrink-0",title:"Mark as done",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark as done"})]})})]},s.id))})]}),(!a?.data||a.data.length===0)&&e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-12 text-center text-gray-500",children:[e.jsx("div",{className:"mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gray-100 text-gray-400",children:e.jsx(x,{className:"h-7 w-7"})}),e.jsx("p",{className:"font-medium",children:"No tasks assigned to you."}),e.jsx("p",{className:"mt-1 text-sm",children:"Tasks assigned by your manager will appear here."})]})]}),a?.meta?.last_page>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",a.data.length," of ",a.meta.total," tasks"]}),e.jsx("div",{className:"flex gap-2",children:a.links?.map((s,u)=>e.jsx(o,{href:s.url||"#",className:`rounded px-3 py-1 text-sm ${s.active?"font-medium":"text-gray-600 hover:bg-gray-100"} ${!s.url&&"pointer-events-none opacity-50"}`,style:s.active?{backgroundColor:`${n}26`,color:n}:{},children:s.label},u))})]})]})}export{T as default};
