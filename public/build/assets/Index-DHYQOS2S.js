import{j as e,H as k,r as w}from"./app-C5kCNUB1.js";import{P as S}from"./ProjectLayout-Cs2_o1Zq.js";import{R as o,B as x,C as c,X as m,Y as h,T as u,L as F,a as l}from"./BarChart-BDH4z6IA.js";import"./AuthErrorHandler-CX2d0ZQT.js";import"./SecondaryButton-BGGBcExY.js";import"./transition-klMjBiMm.js";import"./Dropdown-BwuMX9uL.js";function a(r){return Number(r).toLocaleString()}function _({project:r,salesVsExpenses:j,topProducts:b,salesByHour:g,salesByDay:y,filters:p={}}){const d=r?.primary_color||"#3B82F6",f=r?.secondary_color||"#10B981",v=j?.labels?.map((t,s)=>({label:t,sales:j.datasets?.[0]?.data?.[s]??0,expenses:j.datasets?.[1]?.data?.[s]??0}))??[],N=t=>{w.get(route("projects.modules.analytics.index",r.id),{...p,...t},{preserveState:!0})},n=g?.reduce((t,s)=>s.revenue>(t?.revenue??0)?s:t,null),i=y?.reduce((t,s)=>s.revenue>(t?.revenue??0)?s:t,null);return e.jsxs(S,{header:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Analytics"}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"Sales vs expenses, top products, and peak times"})]})}),children:[e.jsx(k,{title:`${r?.name} - Analytics`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Period:"}),e.jsxs("select",{value:p.period??"month",onChange:t=>N({period:t.target.value}),className:"rounded-md border-gray-300 text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"month",children:"By Month"}),e.jsx("option",{value:"day",children:"By Day"})]}),e.jsx("label",{className:"ml-4 text-sm font-medium text-gray-700",children:"Months:"}),e.jsx("select",{value:p.months??12,onChange:t=>N({months:parseInt(t.target.value,10)}),className:"rounded-md border-gray-300 text-sm focus:border-blue-500 focus:ring-blue-500",children:[3,6,12,24].map(t=>e.jsxs("option",{value:t,children:[t," months"]},t))})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Sales vs Expenses"}),e.jsx("div",{className:"h-72",children:v.length>0?e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:v,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx(c,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(m,{dataKey:"label",tick:{fontSize:12},stroke:"#6b7280"}),e.jsx(h,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:t=>t>=1e3?`${(t/1e3).toFixed(0)}k`:t}),e.jsx(u,{formatter:t=>a(t),contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),e.jsx(F,{}),e.jsx(l,{dataKey:"sales",name:"Sales",fill:d,radius:[4,4,0,0]}),e.jsx(l,{dataKey:"expenses",name:"Expenses",fill:f,radius:[4,4,0,0]})]})}):e.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:"No sales or expenses data for the selected period."})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Top 5 Products by Revenue"}),b?.length>0?e.jsx("div",{className:"h-64",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:b,layout:"vertical",margin:{top:5,right:20,left:80,bottom:5},children:[e.jsx(c,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(m,{type:"number",tickFormatter:t=>a(t)}),e.jsx(h,{type:"category",dataKey:"product_name",width:75,tick:{fontSize:11}}),e.jsx(u,{formatter:t=>a(t)}),e.jsx(l,{dataKey:"total_revenue",name:"Revenue",fill:d,radius:[0,4,4,0]})]})})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No product sales data yet."})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Sales by Hour"}),g?.some(t=>t.count>0)?e.jsxs(e.Fragment,{children:[n&&n.revenue>0&&e.jsxs("p",{className:"mb-3 text-sm text-gray-600",children:["Peak hour: ",e.jsx("strong",{children:n.label})," (",a(n.revenue)," revenue)"]}),e.jsx("div",{className:"h-64",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:g,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx(c,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(m,{dataKey:"label",tick:{fontSize:10},interval:2}),e.jsx(h,{tick:{fontSize:12},tickFormatter:t=>t>=1e3?`${(t/1e3).toFixed(0)}k`:t}),e.jsx(u,{formatter:t=>a(t)}),e.jsx(l,{dataKey:"revenue",name:"Revenue",fill:d,radius:[4,4,0,0]})]})})})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No sales time data yet."})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Sales by Day of Week"}),y?.some(t=>t.count>0)?e.jsxs(e.Fragment,{children:[i&&i.revenue>0&&e.jsxs("p",{className:"mb-3 text-sm text-gray-600",children:["Peak day: ",e.jsx("strong",{children:i.label})," (",a(i.revenue)," revenue, ",i.count," sales)"]}),e.jsx("div",{className:"h-64",children:e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:y,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx(c,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(m,{dataKey:"label",tick:{fontSize:12}}),e.jsx(h,{tick:{fontSize:12},tickFormatter:t=>t>=1e3?`${(t/1e3).toFixed(0)}k`:t}),e.jsx(u,{formatter:t=>a(t)}),e.jsx(l,{dataKey:"revenue",name:"Revenue",fill:f,radius:[4,4,0,0]}),e.jsx(l,{dataKey:"count",name:"Count",fill:d,radius:[4,4,0,0]})]})})})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No sales by day data yet."})]})]})]})}export{_ as default};
