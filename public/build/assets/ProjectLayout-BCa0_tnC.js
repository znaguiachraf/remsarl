import{b as y,j as e,L as v,a as b}from"./app-DYgz6Aoh.js";import{A as N}from"./AuthErrorHandler-yihm7lMq.js";import{D as f}from"./Dropdown-DVZCG4O9.js";const j={"shopping-cart":"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z","check-square":"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4","credit-card":"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z","clipboard-list":"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",package:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",archive:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4","trending-up":"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6","dollar-sign":"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",truck:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0","file-text":"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",folder:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z",users:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z",shield:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z","view-grid":"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"};function M({icon:s}){const o=j[s]||j.folder;return e.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o})})}function g({href:s,active:o,icon:l,children:t,onNavigate:n,isMobile:d,collapsed:c}){return e.jsxs(v,{href:s,onClick:()=>n?.(),title:c?t:void 0,className:`flex min-h-[44px] items-center gap-3 rounded-lg px-3 font-medium transition-colors ${d?"py-3.5 text-base":"py-2.5 text-sm"} ${c?"justify-center px-2":""} ${o?"bg-white/15 text-white":"text-white/80 hover:bg-white/10 hover:text-white active:bg-white/15"}`,children:[e.jsx(M,{icon:l}),!c&&t]})}function w({currentProject:s,enabledModules:o,userRole:l,onNavigate:t,onClose:n,collapsed:d=!1,onToggleCollapse:c,className:p="",variant:h="desktop"}){const{url:x}=y(),a=s?.id;if(!a)return null;const u=m=>x.startsWith(m),r=h==="mobile",i=!r&&d,k=()=>{r?n?.():c?.()};return e.jsxs("aside",{className:`flex h-full shrink-0 flex-col bg-gray-800 transition-[width] duration-200 ${r?"w-full":i?"w-20":"w-64"} ${p}`,style:r?{overscrollBehavior:"contain"}:void 0,children:[e.jsxs("div",{className:`flex shrink-0 items-center justify-between gap-2 border-b border-white/10 px-3 ${r?"h-14 min-h-[3.5rem]":"h-16"} ${i?"px-2":"px-4"}`,children:[e.jsxs("div",{className:`flex min-w-0 flex-1 items-center gap-2 ${i?"justify-center":""}`,children:[s?.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"h-9 w-9 shrink-0 rounded-lg object-cover"}):e.jsx("div",{className:"h-9 w-9 shrink-0 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:s?.primary_color||"#3B82F6"},children:s?.name?.charAt(0)}),!i&&e.jsx("span",{className:"font-semibold text-white truncate",children:s?.name})]}),e.jsx("button",{type:"button",onClick:k,className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg text-white/80 transition hover:bg-white/10 hover:text-white","aria-label":r?"Close menu":i?"Expand sidebar":"Collapse sidebar",title:r?"Close menu":i?"Expand sidebar":"Collapse sidebar",children:r?e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):i?e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}):e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})})]}),e.jsxs("nav",{className:`flex-1 space-y-0.5 overflow-y-auto ${i?"p-2":"p-3"} ${r?"overflow-x-hidden overscroll-contain pb-6":""}`,style:r?{WebkitOverflowScrolling:"touch"}:void 0,children:[e.jsx(g,{href:route("projects.show",a),active:x===route("projects.show",a),icon:"view-grid",onNavigate:t,isMobile:r,collapsed:i,children:"Dashboard"}),o?.map(m=>e.jsx(g,{href:route("projects.modules.show",[a,m.key]),active:u(`/projects/${a}/modules/${m.key}`),icon:m.icon,onNavigate:t,isMobile:r,collapsed:i,children:m.name},m.key)),e.jsx("div",{className:`border-t border-white/10 ${r?"my-3":"my-4"}`}),e.jsx(g,{href:route("projects.workers.index",a),active:u(`/projects/${a}/workers`),icon:"users",onNavigate:t,isMobile:r,collapsed:i,children:"Workers"}),e.jsx(g,{href:route("projects.roles.index",a),active:u(`/projects/${a}/roles`),icon:"shield",onNavigate:t,isMobile:r,collapsed:i,children:"Roles & Permissions"})]})]})}function C({currentProject:s,userProjects:o,variant:l="light"}){const[t,n]=b.useState(!1),d=l==="dark",c=d?"flex items-center gap-3 rounded-lg px-3 py-2 text-left hover:bg-white/10 transition-colors w-full min-w-0":"flex items-center gap-3 rounded-lg px-3 py-2 text-left hover:bg-gray-100 transition-colors w-full min-w-0 border border-gray-200",p=d?"text-white":"text-gray-900",h=d?"text-white/70":"text-gray-500",x=d?"text-white/70":"text-gray-500";return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>n(!t),className:c,children:[s?.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"h-9 w-9 rounded-lg object-cover shrink-0"}):e.jsx("div",{className:"h-9 w-9 rounded-lg flex items-center justify-center text-white font-bold text-sm shrink-0",style:{backgroundColor:s?.primary_color||"#3B82F6"},children:s?.name?.charAt(0)||"?"}),e.jsxs("div",{className:"min-w-0 flex-1 text-left",children:[e.jsx("p",{className:`font-medium truncate ${p}`,children:s?.name||"Select Project"}),e.jsx("p",{className:`text-xs truncate ${h}`,children:s?.status_label||""})]}),e.jsx("svg",{className:`h-5 w-5 shrink-0 transition-transform ${x} ${t?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1),"aria-hidden":"true"}),e.jsxs("div",{className:"absolute left-0 right-0 mt-1 z-50 rounded-lg bg-white py-1 shadow-lg ring-1 ring-black/5 max-h-64 overflow-y-auto",children:[e.jsxs(v,{href:route("projects.index"),className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>n(!1),children:[e.jsx("span",{className:"text-gray-400",children:"+"}),e.jsx("span",{children:"Create / Switch Project"})]}),o?.map(a=>e.jsxs(v,{href:route("projects.show",a.id),className:`flex items-center gap-3 px-4 py-2 hover:bg-gray-50 ${s?.id===a.id?"bg-gray-50":""}`,onClick:()=>n(!1),children:[a.logo?e.jsx("img",{src:a.logo,alt:a.name,className:"h-8 w-8 rounded object-cover shrink-0"}):e.jsx("div",{className:"h-8 w-8 rounded flex items-center justify-center text-white font-bold text-xs shrink-0",style:{backgroundColor:"#3B82F6"},children:a.name?.charAt(0)||"?"}),e.jsx("span",{className:"text-gray-900",children:a.name})]},a.id))]})]})]})}function L({currentProject:s,userProjects:o,user:l,onToggleSidebar:t=()=>{}}){return e.jsxs("header",{className:"sticky top-0 z-30 flex min-h-[4.25rem] flex-wrap items-center gap-3 border-b border-gray-200 bg-white/95 px-4 py-3 backdrop-blur supports-[backdrop-filter]:bg-white/75 sm:px-6",children:[e.jsx("button",{type:"button",onClick:t,className:"inline-flex h-11 w-11 items-center justify-center rounded-lg border border-gray-200 text-gray-600 transition hover:bg-gray-50 md:hidden","aria-label":"Open navigation",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx(C,{currentProject:s,userProjects:o}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(v,{href:route("projects.index"),className:"rounded-lg px-3 py-2 text-gray-600 transition hover:bg-gray-50 hover:text-gray-900",children:"All Projects"}),e.jsxs(f,{children:[e.jsx(f.Trigger,{children:e.jsx("span",{className:"inline-flex w-full rounded-lg",children:e.jsxs("button",{type:"button",className:"inline-flex min-h-[44px] items-center rounded-lg border border-gray-200 bg-white px-3.5 py-2 text-sm font-medium text-gray-600 transition hover:bg-gray-50 hover:text-gray-900 focus:outline-none",children:[l?.name,e.jsx("svg",{className:"-me-0.5 ms-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),e.jsxs(f.Content,{children:[e.jsx(f.Link,{href:route("profile.edit"),children:"Profile"}),e.jsx(f.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})]})]})]})}function H({header:s,children:o}){const{currentProject:l,enabledModules:t,userRole:n,auth:d,userProjects:c}=y().props,[p,h]=b.useState(!1),[x,a]=b.useState(!1),u=l?.primary_color||"#3B82F6",r=l?.secondary_color||"#10B981";return e.jsxs("div",{className:"min-h-screen bg-gray-50",style:{"--project-primary":u,"--project-secondary":r},children:[e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx("div",{className:"hidden shrink-0 md:block",children:e.jsx("div",{className:"sticky top-0 h-screen",children:e.jsx(w,{currentProject:l,enabledModules:t,userRole:n,collapsed:x,onToggleCollapse:()=>a(!x)})})}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-[min(20rem,85vw)] max-w-full transform bg-gray-800 shadow-xl transition-transform duration-300 ease-out md:hidden ${p?"translate-x-0":"-translate-x-full"}`,style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)"},children:e.jsx("div",{className:"flex h-full flex-col overflow-hidden",children:e.jsx(w,{currentProject:l,enabledModules:t,userRole:n,onNavigate:()=>h(!1),variant:"mobile",onClose:()=>h(!1)})})}),p&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 backdrop-blur-sm transition-opacity md:hidden",onClick:()=>h(!1),"aria-hidden":"true"}),e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[e.jsx(L,{currentProject:l,userProjects:c,user:d?.user,onToggleSidebar:()=>h(!0)}),e.jsxs("main",{className:"flex-1",children:[s&&e.jsx("div",{className:"border-b border-gray-200 bg-white px-4 py-4 sm:px-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:s})}),e.jsx("div",{className:"p-4 sm:p-6",children:o})]})]})]}),e.jsx(N,{})]})}export{H as P};
