import{a as j,u as v,j as e,H as f,L as N,r as y}from"./app-nMU3D5F2.js";import{A as w,a}from"./AdminLayout-DmkUFmQL.js";import{M as b,S as k}from"./SecondaryButton-D88lzX2s.js";import{P as u}from"./PrimaryButton-refXe8ov.js";import"./AuthErrorHandler-0iv1Y0bc.js";import"./transition-B1micqJt.js";function D({assignments:c,users:o,projects:x,roles:m,filters:r,flash:l}){const[h,d]=j.useState(!1),t=v({user_id:"",project_id:"",role_id:""}),p=s=>{s.preventDefault(),t.post(route("admin.workers.store"),{preserveScroll:!0,onSuccess:()=>{t.reset(),d(!1)}})},g=s=>{confirm("Remove this worker from the project?")||s.preventDefault()},i=s=>{y.get(route("admin.workers.index"),s,{preserveState:!0})},n="rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm";return e.jsxs(w,{header:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-50 p-2",children:e.jsx(a,{icon:"workers",className:"w-6 h-6 text-indigo-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Workers"})]}),e.jsxs(u,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[e.jsx(a,{icon:"plus",className:"w-5 h-5"}),"Assign Project"]})]}),children:[e.jsx(f,{title:"Workers - Admin"}),l?.success&&e.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-4 text-sm text-green-800",children:l.success}),l?.error&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4 text-sm text-red-800",children:l.error}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{icon:"projects",className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:r?.project_id||"",onChange:s=>i({...r,project_id:s.target.value||void 0}),className:`${n} max-w-[180px]`,children:[e.jsx("option",{value:"",children:"All projects"}),x?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{icon:"users",className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:r?.user_id||"",onChange:s=>i({...r,user_id:s.target.value||void 0}),className:`${n} max-w-[200px]`,children:[e.jsx("option",{value:"",children:"All users"}),o?.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{icon:"roles",className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:r?.role_id||"",onChange:s=>i({...r,role_id:s.target.value||void 0}),className:`${n} max-w-[140px]`,children:[e.jsx("option",{value:"",children:"All roles"}),m?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-green-400","aria-hidden":!0}),e.jsxs("select",{value:r?.status||"",onChange:s=>i({...r,status:s.target.value||void 0}),className:`${n} max-w-[120px]`,children:[e.jsx("option",{value:"",children:"All statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),(r?.project_id||r?.user_id||r?.role_id||r?.status)&&e.jsx("button",{type:"button",onClick:()=>i({}),className:"text-sm font-medium text-gray-600 hover:text-gray-900",children:"Clear filters"})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{icon:"users",className:"w-4 h-4 text-gray-400"}),"User"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{icon:"projects",className:"w-4 h-4 text-gray-400"}),"Project"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{icon:"roles",className:"w-4 h-4 text-gray-400"}),"Role"]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-green-400","aria-hidden":!0}),"Status"]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:c?.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gray-100",children:e.jsx(a,{icon:"users",className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.user?.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.user?.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.project?.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2.5 py-0.5 text-sm font-medium text-gray-800",children:s.role?.name||"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800 capitalize",children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs(N,{href:route("admin.workers.destroy",s.id),method:"delete",as:"button",preserveScroll:!0,onClick:g,className:"inline-flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-1.5 text-sm font-medium text-red-700 transition hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:[e.jsx(a,{icon:"trash",className:"w-4 h-4"}),"Remove"]})})]},s.id))})]}),(!c||c.length===0)&&e.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"No project assignments yet. Assign a user to a project to get started."})]}),h&&e.jsx(b,{show:!0,onClose:()=>{d(!1),t.reset()},maxWidth:"md",children:e.jsxs("form",{onSubmit:p,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Assign Project to User"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Add a user to a project with a specific role."}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User"}),e.jsxs("select",{value:t.data.user_id,onChange:s=>t.setData("user_id",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select user"}),o?.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]}),t.errors.user_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.user_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project"}),e.jsxs("select",{value:t.data.project_id,onChange:s=>t.setData("project_id",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select project"}),x?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.errors.project_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.project_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsxs("select",{value:t.data.role_id,onChange:s=>t.setData("role_id",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select role"}),m?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.errors.role_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.role_id})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(k,{type:"button",onClick:()=>{d(!1),t.reset()},children:"Cancel"}),e.jsx(u,{type:"submit",disabled:t.processing,children:"Assign"})]})]})})]})}export{D as default};
