import{u as b,j as e,H as v}from"./app-DsbtE9GP.js";import{A as y,a as N}from"./AdminLayout-8UfMwXPy.js";import{I as m}from"./InputError-BoWGftgF.js";import{I as o}from"./InputLabel-DopdNHBh.js";import{P as w}from"./PrimaryButton-CrRcOPUG.js";import{S as k}from"./SecondaryButton-D6s39TqU.js";import{T as c}from"./TextInput-BYoTAR1b.js";import"./AuthErrorHandler-BdNAW_xG.js";import"./transition-DLg9yKE9.js";function u(i){return Array.isArray(i)?i:i&&typeof i=="object"?Object.values(i).map(Number).filter(Boolean):[]}function B({role:i,permissions:x}){const{data:t,setData:n,patch:p,processing:g,errors:d}=b({name:i?.name??"",slug:i?.slug??"",description:i?.description??"",level:i?.level??40,permission_ids:u(i?.permission_ids)}),h=s=>{s.preventDefault(),p(route("admin.roles.update",i.id))},l=u(t.permission_ids),j=s=>{n("permission_ids",l.includes(s)?l.filter(a=>a!==s):[...l,s])},f=(x||[]).reduce((s,a)=>{const r=a.module||"other";return s[r]||(s[r]=[]),s[r].push(a),s},{});return e.jsxs(y,{header:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-50 p-2",children:e.jsx(N,{icon:"roles",className:"w-6 h-6 text-indigo-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Role"})]}),children:[e.jsx(v,{title:`Edit ${i?.name} - Admin`}),e.jsxs("form",{onSubmit:h,className:"max-w-2xl space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",value:"Name"}),e.jsx(c,{id:"name",className:"mt-1 block w-full",value:t.name,onChange:s=>n("name",s.target.value),required:!0}),e.jsx(m,{message:d.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"slug",value:"Slug"}),e.jsx(c,{id:"slug",className:"mt-1 block w-full",value:t.slug,onChange:s=>n("slug",s.target.value),required:!0}),e.jsx(m,{message:d.slug})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"level",value:"Level (0-100)"}),e.jsx("input",{type:"number",id:"level",min:"0",max:"100",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:t.level,onChange:s=>n("level",parseInt(s.target.value,10))}),e.jsx(m,{message:d.level})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",value:"Description (optional)"}),e.jsx("textarea",{id:"description",rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:t.description,onChange:s=>n("description",s.target.value)})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx(o,{value:"Permissions"}),e.jsx("div",{className:"mt-4 space-y-4 max-h-64 overflow-y-auto",children:Object.entries(f).map(([s,a])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 capitalize",children:s}),e.jsx("div",{className:"mt-2 space-y-2",children:a.map(r=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.includes(r.id),onChange:()=>j(r.id),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.name})]},r.id))})]},s))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(w,{type:"submit",disabled:g,children:"Update Role"}),e.jsx(k,{type:"button",onClick:()=>window.history.back(),children:"Cancel"})]})]})]})}export{B as default};
