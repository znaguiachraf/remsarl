import{u as p,j as e,H as j}from"./app-fSu64WR-.js";import{A as v,a as b}from"./AdminLayout-CKnpuqav.js";import{T as d,I as n}from"./TextInput-QgXqvZmf.js";import{I as t}from"./InputLabel-DP1sH5mm.js";import{P as f}from"./PrimaryButton-BvYeoX1B.js";import{S as y}from"./SecondaryButton-CM4f6Nua.js";import"./AuthErrorHandler-BuFZfN6N.js";import"./transition-CncNDczQ.js";function A({permissions:m}){const{data:i,setData:l,post:c,processing:u,errors:o}=p({name:"",slug:"",description:"",level:40,permission_ids:[]}),x=s=>{s.preventDefault(),c(route("admin.roles.store"))},h=s=>{l("permission_ids",a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},g=(m||[]).reduce((s,a)=>{const r=a.module||"other";return s[r]||(s[r]=[]),s[r].push(a),s},{});return e.jsxs(v,{header:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-50 p-2",children:e.jsx(b,{icon:"roles",className:"w-6 h-6 text-indigo-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Role"})]}),children:[e.jsx(j,{title:"Create Role - Admin"}),e.jsxs("form",{onSubmit:x,className:"max-w-2xl space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",value:"Name"}),e.jsx(d,{id:"name",className:"mt-1 block w-full",value:i.name,onChange:s=>l("name",s.target.value),required:!0}),e.jsx(n,{message:o.name})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"slug",value:"Slug (e.g. custom-role)"}),e.jsx(d,{id:"slug",className:"mt-1 block w-full",value:i.slug,onChange:s=>l("slug",s.target.value),placeholder:"e.g. custom-role",required:!0}),e.jsx(n,{message:o.slug})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"level",value:"Level (0-100, higher = more privileges)"}),e.jsx("input",{type:"number",id:"level",min:"0",max:"100",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:i.level,onChange:s=>l("level",parseInt(s.target.value,10))}),e.jsx(n,{message:o.level})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"description",value:"Description (optional)"}),e.jsx("textarea",{id:"description",rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:i.description,onChange:s=>l("description",s.target.value)})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx(t,{value:"Permissions"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select which permissions this role should have."}),e.jsx("div",{className:"mt-4 space-y-4 max-h-64 overflow-y-auto",children:Object.entries(g).map(([s,a])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 capitalize",children:s}),e.jsx("div",{className:"mt-2 space-y-2",children:a.map(r=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.permission_ids.includes(r.id),onChange:()=>h(r.id),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.name})]},r.id))})]},s))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{type:"submit",disabled:u,children:"Create Role"}),e.jsx(y,{type:"button",onClick:()=>window.history.back(),children:"Cancel"})]})]})]})}export{A as default};
