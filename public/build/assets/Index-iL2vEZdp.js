import{b as k,a as b,u as _,j as e,H as C,r as S,L}from"./app-CV_ed7_i.js";import{P as F}from"./ProjectLayout-CCBX1sk_.js";import{M as A,S as E}from"./SecondaryButton-PnKEJt8F.js";import{P as h}from"./PrimaryButton-fG5qMxE-.js";import{I as n}from"./InputLabel-Covi2RWO.js";import{I as u}from"./InputError-chaytR5f.js";import"./AuthErrorHandler-CZjHl6Ix.js";import"./Dropdown-BLtL5ZC7.js";import"./transition-wRWBGdP0.js";function V({project:o,notes:i,workers:d,filters:c,can:j={},hasHrModule:y=!1}){const m=k(),t=m.props.currentProject?.primary_color||"#3B82F6",x=m.props.currentProject?.secondary_color||"#10B981",f="focus:border-[var(--project-primary)] focus:ring-[var(--project-primary)]",[g,a]=b.useState(!1),s=_({worker_id:"",content:"",direction:"to_employee"}),v=r=>{S.get(route("projects.notes.index",o.id),r,{preserveState:!0})},N=r=>{r.preventDefault(),s.post(route("projects.notes.store",o.id),{preserveScroll:!0,onSuccess:()=>{s.reset(),a(!1)}})},l=`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${f}`,p=r=>r==="to_employee"?"To employee":"From employee",w=r=>y?e.jsx(L,{href:route("projects.modules.hr.workers.show",[o.id,r.id]),className:"font-medium hover:underline",style:{color:t},children:r.full_name}):e.jsx("span",{className:"font-medium",children:r.full_name});return e.jsxs(F,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg",style:{backgroundColor:t+"20",color:t},children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Employee Notes"}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"Notes to and from employees"})]})]}),j?.create&&e.jsxs(h,{onClick:()=>a(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Note"]})]}),children:[e.jsx(C,{title:`${o?.name} - Employee Notes`}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by worker:"}),e.jsxs("select",{value:c?.worker_id||"",onChange:r=>v({...c,worker_id:r.target.value||void 0}),className:l+" max-w-[220px]",children:[e.jsx("option",{value:"",children:"All workers"}),d?.map(r=>e.jsx("option",{value:r.id,children:r.full_name},r.id))]})]}),e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:i?.length===0?e.jsx("div",{className:"px-4 py-12 text-center text-gray-500",children:"No notes yet. Add a note to or from an employee."}):i?.map(r=>e.jsx("div",{className:"px-4 py-4 sm:px-6 sm:py-5 hover:bg-gray-50/50",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:r.content}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-gray-500",children:[w(r.worker),e.jsx("span",{children:p(r.direction)}),e.jsx("span",{children:r.author.name}),e.jsx("span",{children:new Date(r.created_at).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})})]})]}),e.jsx("span",{className:"inline-flex shrink-0 rounded-full px-2.5 py-0.5 text-xs font-medium",style:{backgroundColor:r.direction==="to_employee"?t+"20":x+"20",color:r.direction==="to_employee"?t:x},children:p(r.direction)})]})},r.id))})}),g&&e.jsx(A,{show:!0,onClose:()=>a(!1),children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Employee Note"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add a note to or from an employee."}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"worker_id",children:"Worker"}),e.jsxs("select",{id:"worker_id",className:l,value:s.data.worker_id,onChange:r=>s.setData("worker_id",r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select worker"}),d?.map(r=>e.jsx("option",{value:r.id,children:r.full_name},r.id))]}),e.jsx(u,{message:s.errors.worker_id})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"direction",children:"Direction"}),e.jsxs("select",{id:"direction",className:l,value:s.data.direction,onChange:r=>s.setData("direction",r.target.value),children:[e.jsx("option",{value:"to_employee",children:"To employee"}),e.jsx("option",{value:"from_employee",children:"From employee"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"content",children:"Content"}),e.jsx("textarea",{id:"content",className:l,rows:4,value:s.data.content,onChange:r=>s.setData("content",r.target.value),placeholder:"Enter note content...",required:!0}),e.jsx(u,{message:s.errors.content})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(E,{type:"button",onClick:()=>a(!1),children:"Cancel"}),e.jsx(h,{type:"submit",disabled:s.processing,children:"Add Note"})]})]})})]})}export{V as default};
