import{b as C,j as e,L as v,a as w}from"./app-C5kCNUB1.js";import{A as B}from"./AuthErrorHandler-CX2d0ZQT.js";import{D as j}from"./Dropdown-BwuMX9uL.js";const H={analytics:s=>route("projects.modules.analytics.index",s),hr:s=>route("projects.modules.hr.workers.index",s),tasks:s=>route("projects.modules.tasks.index",s),suppliers:s=>route("projects.modules.suppliers.index",s),products:s=>route("projects.modules.products.index",s),sales:s=>route("projects.modules.sales.index",s),stock:s=>route("projects.modules.stock.index",s),pos:s=>route("projects.modules.pos.index",s),payments:s=>route("projects.modules.payments.index",s),expenses:s=>route("projects.modules.expenses.index",s),purchase:s=>route("projects.modules.purchase.index",s),logs:s=>route("projects.modules.logs.index",s)},k=(s,o)=>H[o]?.(s)??route("projects.modules.show",[s,o]),N={"shopping-cart":"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z","check-square":"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4","credit-card":"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z","clipboard-list":"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",package:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",archive:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4","trending-up":"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6","dollar-sign":"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",truck:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0","file-text":"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z","shopping-bag":"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z",folder:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z",users:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z",shield:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z","view-grid":"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z",cog:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"};function S({icon:s}){const o=N[s]||N.folder;return e.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o})})}function f({href:s,active:o,icon:n,children:t,onNavigate:c,isMobile:d,collapsed:x,badge:h=0}){return e.jsxs(v,{href:s,onClick:()=>c?.(),title:x?t:void 0,className:`flex min-h-[44px] items-center gap-3 rounded-lg px-3 font-medium transition-colors ${d?"py-3.5 text-base":"py-2.5 text-sm"} ${x?"justify-center px-2":""} ${o?"bg-white/15 text-white":"text-white/80 hover:bg-white/10 hover:text-white active:bg-white/15"}`,children:[e.jsxs("span",{className:"relative shrink-0",children:[e.jsx(S,{icon:n}),h>0&&e.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 min-w-[1rem] items-center justify-center rounded-full bg-white/90 px-1 text-[10px] font-semibold text-gray-800",children:h>99?"99+":h})]}),!x&&t]})}function M({currentProject:s,enabledModules:o,userRole:n,onNavigate:t,onClose:c,collapsed:d=!1,onToggleCollapse:x,className:h="",variant:m="desktop"}){const{url:u,props:l}=C(),a=s?.id,b=l?.notificationCounts??{};if(!a)return null;const g=p=>u.startsWith(p),r=m==="mobile",i=!r&&d,L=s?.primary_color||"#3B82F6",$=s?.secondary_color||"#10B981",y={background:`linear-gradient(135deg, ${L} 0%, ${$} 100%)`},z=()=>{r?c?.():x?.()};return e.jsxs("aside",{className:`flex h-full shrink-0 flex-col transition-[width] duration-200 ${r?"w-full":i?"w-20":"w-64"} ${h}`,style:r?{...y,overscrollBehavior:"contain"}:y,children:[e.jsxs("div",{className:`flex shrink-0 items-center justify-between gap-2 border-b border-white/10 px-3 ${r?"h-14 min-h-[3.5rem]":"h-16"} ${i?"px-2":"px-4"}`,children:[e.jsxs("div",{className:`flex min-w-0 flex-1 items-center gap-2 ${i?"justify-center":""}`,children:[s?.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"h-9 w-9 shrink-0 rounded-lg object-cover"}):e.jsx("div",{className:"h-9 w-9 shrink-0 rounded-lg flex items-center justify-center text-white font-bold text-sm bg-white/25 backdrop-blur-sm",children:s?.name?.charAt(0)}),!i&&e.jsx("span",{className:"font-semibold text-white truncate",children:s?.name})]}),e.jsx("button",{type:"button",onClick:z,className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg text-white/80 transition hover:bg-white/10 hover:text-white","aria-label":r?"Close menu":i?"Expand sidebar":"Collapse sidebar",title:r?"Close menu":i?"Expand sidebar":"Collapse sidebar",children:r?e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):i?e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}):e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})})]}),e.jsxs("nav",{className:`flex-1 space-y-0.5 overflow-y-auto ${i?"p-2":"p-3"} ${r?"overflow-x-hidden overscroll-contain pb-6":""}`,style:r?{WebkitOverflowScrolling:"touch"}:void 0,children:[e.jsx(f,{href:route("projects.show",a),active:u===route("projects.show",a),icon:"view-grid",onNavigate:t,isMobile:r,collapsed:i,children:"Dashboard"}),o?.map(p=>e.jsx(f,{href:k(a,p.key),active:g(k(a,p.key)),icon:p.icon,onNavigate:t,isMobile:r,collapsed:i,badge:p.key==="tasks"?b?.tasks??0:0,children:p.name},p.key)),e.jsx("div",{className:`border-t border-white/10 ${r?"my-3":"my-4"}`}),e.jsx(f,{href:route("projects.notes.index",a),active:g(`/projects/${a}/notes`),icon:"file-text",onNavigate:t,isMobile:r,collapsed:i,children:"Employee Notes"}),e.jsx(f,{href:route("projects.workers.index",a),active:g(`/projects/${a}/workers`),icon:"users",onNavigate:t,isMobile:r,collapsed:i,children:"Workers"}),e.jsx(f,{href:route("projects.roles.index",a),active:g(`/projects/${a}/roles`),icon:"shield",onNavigate:t,isMobile:r,collapsed:i,children:"Roles & Permissions"}),l?.currentProject?.can_update&&e.jsx(f,{href:route("projects.settings.index",a),active:g(`/projects/${a}/settings`),icon:"cog",onNavigate:t,isMobile:r,collapsed:i,children:"Settings"})]})]})}function V({currentProject:s,userProjects:o,variant:n="light"}){const[t,c]=w.useState(!1),d=n==="dark",x=d?"flex items-center gap-3 rounded-lg px-3 py-2 text-left hover:bg-white/10 transition-colors w-full min-w-0":"flex items-center gap-3 rounded-lg px-3 py-2 text-left hover:bg-gray-100 transition-colors w-full min-w-0 border border-gray-200",h=d?"text-white":"text-gray-900",m=d?"text-white/70":"text-gray-500",u=d?"text-white/70":"text-gray-500";return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>c(!t),className:x,children:[s?.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"h-9 w-9 rounded-lg object-cover shrink-0"}):e.jsx("div",{className:"h-9 w-9 rounded-lg flex items-center justify-center text-white font-bold text-sm shrink-0",style:{backgroundColor:s?.primary_color||"#3B82F6"},children:s?.name?.charAt(0)||"?"}),e.jsxs("div",{className:"min-w-0 flex-1 text-left",children:[e.jsx("p",{className:`font-medium truncate ${h}`,children:s?.name||"Select Project"}),e.jsx("p",{className:`text-xs truncate ${m}`,children:s?.status_label||""})]}),e.jsx("svg",{className:`h-5 w-5 shrink-0 transition-transform ${u} ${t?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1),"aria-hidden":"true"}),e.jsxs("div",{className:"absolute left-0 right-0 mt-1 z-50 rounded-lg bg-white py-1 shadow-lg ring-1 ring-black/5 max-h-64 overflow-y-auto",children:[e.jsxs(v,{href:route("projects.index"),className:"flex items-center gap-3 px-4 py-2 text-gray-700 hover:bg-gray-50",onClick:()=>c(!1),children:[e.jsx("span",{className:"text-gray-400",children:"+"}),e.jsx("span",{children:"Create / Switch Project"})]}),o?.map(l=>e.jsxs(v,{href:route("projects.show",l.id),className:`flex items-center gap-3 px-4 py-2 hover:bg-gray-50 ${s?.id===l.id?"bg-gray-50":""}`,onClick:()=>c(!1),children:[l.logo?e.jsx("img",{src:l.logo,alt:l.name,className:"h-8 w-8 rounded object-cover shrink-0"}):e.jsx("div",{className:"h-8 w-8 rounded flex items-center justify-center text-white font-bold text-xs shrink-0",style:{backgroundColor:"#3B82F6"},children:l.name?.charAt(0)||"?"}),e.jsx("span",{className:"text-gray-900",children:l.name})]},l.id))]})]})]})}function _({currentProject:s,userProjects:o,user:n,onToggleSidebar:t=()=>{}}){return e.jsxs("header",{className:"sticky top-0 z-30 flex min-h-[4.25rem] flex-wrap items-center gap-3 border-b border-gray-200 bg-white/95 px-4 py-3 backdrop-blur supports-[backdrop-filter]:bg-white/75 sm:px-6",children:[e.jsx("button",{type:"button",onClick:t,className:"inline-flex h-11 w-11 items-center justify-center rounded-lg border border-gray-200 text-gray-600 transition hover:bg-gray-50 md:hidden","aria-label":"Open navigation",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx(V,{currentProject:s,userProjects:o}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n?.is_admin&&s?.id&&e.jsx(v,{href:route("admin.projects.edit",s.id),className:"inline-flex min-h-[44px] min-w-[44px] items-center justify-center whitespace-nowrap rounded-xl px-4 py-2.5 text-sm font-medium transition active:scale-95 touch-manipulation",style:{color:s?.primary_color||"#3B82F6",backgroundColor:`${s?.primary_color||"#3B82F6"}15`},children:"Edit colors"}),e.jsx(v,{href:route("projects.index"),className:"rounded-lg px-3 py-2 text-gray-600 transition hover:bg-gray-50 hover:text-gray-900",children:"All Projects"}),e.jsxs(j,{children:[e.jsx(j.Trigger,{children:e.jsx("span",{className:"inline-flex w-full rounded-lg",children:e.jsxs("button",{type:"button",className:"inline-flex min-h-[44px] items-center rounded-lg border border-gray-200 bg-white px-3.5 py-2 text-sm font-medium text-gray-600 transition hover:bg-gray-50 hover:text-gray-900 focus:outline-none",children:[n?.name,e.jsx("svg",{className:"-me-0.5 ms-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),e.jsxs(j.Content,{children:[e.jsx(j.Link,{href:route("profile.edit"),children:"Profile"}),e.jsx(j.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})]})]})]})}function F({header:s,children:o}){const{currentProject:n,enabledModules:t,userRole:c,auth:d,userProjects:x}=C().props,[h,m]=w.useState(!1),[u,l]=w.useState(!1),a=n?.primary_color||"#3B82F6",b=n?.secondary_color||"#10B981";return e.jsxs("div",{className:"min-h-screen bg-gray-50",style:{"--project-primary":a,"--project-secondary":b},children:[e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx("div",{className:"hidden shrink-0 md:block",children:e.jsx("div",{className:"sticky top-0 h-screen",children:e.jsx(M,{currentProject:n,enabledModules:t,userRole:c,collapsed:u,onToggleCollapse:()=>l(!u)})})}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-[min(20rem,85vw)] max-w-full transform shadow-xl transition-transform duration-300 ease-out md:hidden ${h?"translate-x-0":"-translate-x-full"}`,style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)"},children:e.jsx("div",{className:"flex h-full flex-col overflow-hidden",children:e.jsx(M,{currentProject:n,enabledModules:t,userRole:c,onNavigate:()=>m(!1),variant:"mobile",onClose:()=>m(!1)})})}),h&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 backdrop-blur-sm transition-opacity md:hidden",onClick:()=>m(!1),"aria-hidden":"true"}),e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[e.jsx(_,{currentProject:n,userProjects:x,user:d?.user,onToggleSidebar:()=>m(!0)}),e.jsxs("main",{className:"flex-1",children:[s&&e.jsx("div",{className:"border-b border-gray-200 bg-white px-4 py-4 sm:px-6",children:e.jsx("div",{className:"max-w-7xl text-left",children:s})}),e.jsx("div",{className:"p-4 sm:p-6",children:o})]})]})]}),e.jsx(B,{})]})}export{F as P};
